
DROP TABLE employees;
-- DROP TABLE relations_dep;
DROP TABLE departments;
DROP TABLE jobs;
DROP TABLE users;
DROP SEQUENCE hibernate_sequence;

CREATE SEQUENCE hibernate_sequence
increment by 1
start with 1;

/** -------------------------------------------------------------- */

CREATE TABLE jobs (
  id INT4 PRIMARY KEY,
  definition VARCHAR(200) NOT NULL
);

CREATE TABLE departments(
  id INT4 PRIMARY KEY,
  name VARCHAR(60) NOT NULL,
  date DATE NOT NULL,
  master_id INT4,
  CONSTRAINT dep_dep foreign key (master_id) references departments
);

-- CREATE TABLE relations_dep (
--   r_id INT4 PRIMARY KEY,
--   master_id INT4 not NULL,
--   branch_id INT4 NOT NULL,
--   CONSTRAINT rel_master foreign key (master_id) references departments(id),
--   CONSTRAINT rel_branch foreign key (branch_id) references departments(id)
-- );

CREATE TABLE employees(
  id INT4 PRIMARY KEY,
  firstname VARCHAR(60) NOT NULL,
  lastname VARCHAR(60) NOT NULL,
  patronymic VARCHAR(60) NOT NULL,
  gender VARCHAR(6) NOT NULL,
  birthdate DATE NOT NULL,
  d_id INT4 NOT NULL,
  hiredate DATE NOT NULL,
  dismissal DATE,
  j_id INT4 NOT NULL,
  salary INT4 NOT NULL,
  chief BOOLEAN NOT NULL,
  CONSTRAINT emp_dep foreign key (d_id) references departments,
  CONSTRAINT emp_job foreign key (j_id) references jobs
);

CREATE TABLE users (
  id INT4 PRIMARY KEY,
  username VARCHAR(20) NOT NULL,
  password VARCHAR(20) NOT NULL
);