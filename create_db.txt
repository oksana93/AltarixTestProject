
DROP TABLE employees;
DROP TABLE relations_dep;
DROP TABLE departments;
DROP TABLE jobs;
DROP SEQUENCE hibernate_sequence;

CREATE SEQUENCE hibernate_sequence
increment by 1
start with 1;

/** -------------------------------------------------------------- */

CREATE TABLE jobs (
  j_id INT4 PRIMARY KEY,
  j_definition VARCHAR(200) NOT NULL
);

CREATE TABLE departments(
  d_id INT4 PRIMARY KEY,
  d_name VARCHAR(60) NOT NULL,
  d_date DATE NOT NULL
);

CREATE TABLE relations_dep (
  r_id INT4 PRIMARY KEY,
  master_id INT4 references departments(d_id),
  branch_id INT4 references departments(d_id)
);

CREATE TABLE employees(
  e_id INT4 PRIMARY KEY,
  e_firstname VARCHAR(60) NOT NULL,
  e_lastname VARCHAR(60) NOT NULL,
  e_patronymic VARCHAR(60) NOT NULL,
  e_gender VARCHAR(6) NOT NULL,
  e_birthdate DATE NOT NULL,
  d_id INT4 NOT NULL,
  e_hiredate DATE NOT NULL,
  e_dismissal DATE,
  j_id INT4 NOT NULL,
  e_salary INT4 NOT NULL,
  e_chief BOOLEAN NOT NULL,
  CONSTRAINT FK35x76r7qb28a04wmmkxxwt9cm foreign key (d_id) references departments,
  CONSTRAINT FK5jreb3o4pwc8071nesehj76wo foreign key (j_id) references jobs
);
